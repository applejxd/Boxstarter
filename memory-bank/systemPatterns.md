# Windows Setup システムパターン

## アーキテクチャ概要

このプロジェクトは、モジュラー構造を採用しており、以下の主要コンポーネントで構成されています：

```
windows-setup/
├── bin/                # ユーティリティバッチファイル
├── config/             # 各種設定ファイル
├── scripts/            # PowerShellスクリプト
│   ├── installer/      # インストール用スクリプト
│   ├── network/        # ネットワーク設定スクリプト
│   └── regkey/         # レジストリ設定スクリプト
└── tools/              # ツール固有の設定
    ├── Everything/     # Everythingの設定
    ├── Keyhac/         # Keyhacの設定
    ├── Keypirinha/     # Keypirinha設定
    └── NewPlus/        # 新規プロジェクトテンプレート
```

## 設計パターン

### 1. モジュラー構成

プロジェクトは機能ごとに明確に分離されたモジュールで構成されています：

- **インストールモジュール**: `scripts/installer/`ディレクトリ内のスクリプトで、各種ソフトウェアのインストールを担当
- **設定モジュール**: `config/`ディレクトリ内のファイルで、システム全体の設定を管理
- **ツール固有モジュール**: `tools/`ディレクトリ内の各サブディレクトリで、特定のツールの設定を管理
- **ユーティリティモジュール**: `bin/`ディレクトリ内のバッチファイルで、日常的なタスクを自動化

### 2. スクリプト駆動アプローチ

システムの多くの機能はPowerShellスクリプトによって自動化されています：

- **インストールスクリプト**: Winget、Scoop、その他のパッケージマネージャーを活用して、ソフトウェアのインストールを自動化
- **設定スクリプト**: レジストリやシステム設定を自動的に構成
- **ネットワークスクリプト**: ポートの開閉やSSHの設定などを自動化

### 3. 設定ファイル管理

各種ツールの設定ファイルは、一元管理されています：

- **直接管理**: 設定ファイルをリポジトリ内で直接管理
- **シンボリックリンク**: 必要に応じて、実際の設定ファイルの場所にシンボリックリンクを作成

### 4. キーボードカスタマイズ

Keyhacを使用して、Emacs風のキーバインドを実現しています：

- **基本設定**: 基本的なEmacs風キーバインド
- **拡張機能**: 様々な拡張機能を活用して、特定のアプリケーションやシナリオに対応
- **個人設定**: 個人の好みに合わせたカスタマイズ

### 5. テンプレートベースの新規プロジェクト

`tools/NewPlus/`ディレクトリには、新規プロジェクト作成のためのテンプレートが含まれています：

- **C++テンプレート**: C++プロジェクトのテンプレート
- **Pythonテンプレート**: Pythonプロジェクトのテンプレート

## コンポーネント間の関係

1. **デプロイスクリプト**: `deploy.ps1`は、設定ファイルの配置やシンボリックリンクの作成を担当
2. **インストールスクリプト**: `scripts/installer/`内のスクリプトは、必要なソフトウェアをインストール
3. **設定ファイル**: `config/`および`tools/`内のファイルは、インストールされたソフトウェアの設定を提供
4. **ユーティリティ**: `bin/`内のバッチファイルは、日常的なタスクを自動化

## 技術的な決定

1. **PowerShellの使用**: Windowsネイティブのスクリプト言語としてPowerShellを採用
2. **バッチファイルの活用**: 簡単なユーティリティには、バッチファイルを使用
3. **Keyhacの採用**: キーボードカスタマイズにKeyhacを選択
4. **パッケージマネージャーの活用**: Winget、Scoopなどのパッケージマネージャーを活用して、ソフトウェアのインストールを自動化
5. **WSL2の活用**: Linux環境との連携にWSL2を活用

## 拡張性

このシステムは、以下の方法で拡張可能です：

1. **新しいインストールスクリプトの追加**: 新しいソフトウェアのインストールスクリプトを`scripts/installer/`に追加
2. **新しい設定ファイルの追加**: 新しいツールの設定ファイルを`config/`または`tools/`に追加
3. **新しいユーティリティの追加**: 新しいバッチファイルを`bin/`に追加
4. **Keyhac拡張機能の追加**: 新しいKeyhac拡張機能を`tools/Keyhac/extension/`に追加
5. **新しいプロジェクトテンプレートの追加**: 新しいプロジェクトテンプレートを`tools/NewPlus/`に追加
